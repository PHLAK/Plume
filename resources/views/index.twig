{% extends "layouts/app.twig" %}

{% block content %}
    <div id="posts" class="list-none">
        {% for slug, post in posts %}
            <div id="post" class="space-y-6">
                <h2 class="text-4xl font-light text-center">
                    <a href="post/{{ slug }}">{{ post.title }}</a>
                </h2>

                {% include "components/metadata.twig" %}

                {% if post.image %}
                    <img class="h-40 w-full object-cover" src="{{ post.image.url }}" />
                {% endif %}

                <article class="prose prose-xl max-w-none">{{ post.excerpt | raw }}</article>

                <a href="post/{{ slug }}" class="inline-block text-stone-600 underline">
                    Read More
                </a>
            </div>

            {% if loop.last == false  %}
                <hr class="border-t-4 border-stone-200 w-64 mx-auto my-12">
            {% endif %}
        {% endfor %}
    </div>

    {% if pagination %}
        <div id="pagination" class="flex justify-between border-t-2 border-stone-800 py-6 mt-12">
            <div>
                <a href="/?page={{ pagination.previous }}" class="flex items-center gap-2 hover:underline {{ html_classes({
                    'invisible': pagination.previous == null
                }) }}">
                    {{ include('icons/light/arrow-left.twig', { class: 'size-6' }) }}
                    Previous Page
                </a>
            </div>

            <div>
                {% for page in pagination.pages %}
                    <a href="/?page={{ page }}" class="rounded bg-stone-200 text-stone-800 px-3 py-1">{{ page }}</a>
                {% endfor %}
            </div>

            <div>
                <a href="/?page={{ pagination.next }}" class="flex items-center gap-2 hover:underline {{ html_classes({
                    'invisible': pagination.next == null
                }) }}">
                    Next Page
                    {{ include('icons/light/arrow-right.twig', { class: 'size-6' }) }}
                </a>
            </div>
        </div>
    {% endif %}
{% endblock %}
