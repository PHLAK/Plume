{% set pages = pages() %}

<header>
    <div class="container max-w-4xl text-center mx-auto px-4 py-8">
        <a href="{{ url_for('posts') }}" class="inline-block text-stone-800">
            <span class="font-serif font-extralight text-4xl md:text-6xl dark:text-stone-200">{{ config('site_title') }}</span>
        </a>
    </div>
</header>

<div x-data="{ open: false }">
    <div class="flex justify-between items-center">
        <div class="container max-w-4xl flex justify-between items-center border-double border-stone-800 border-t-4 border-b-4 text-stone-800 mx-auto px-4 py-2 dark:border-stone-200 dark:text-stone-200">
            <!-- Desktop Navigation -->
            <a href="{{ full_url_for('posts') }}" class="flex justify-center items-center rounded cursor-pointer p-1 hover:bg-stone-200 dark:text-stone-200 dark:hover:bg-stone-700 sm:flex">
                {{ svg('light/home', ['fill-current', 'size-6']) }}
            </a>

            <button @click="open = !open" type="button" class="flex justify-center items-center rounded cursor-pointer p-1 hover:bg-stone-200 dark:text-stone-200 dark:hover:bg-stone-700 sm:hidden">
                {{ svg('light/bars', ['fill-current', 'size-6']) }}
            </button>

            <div class="items-center gap-2 hidden sm:flex">
                {% if tags_enabled %}
                    <a href="/tags" class="hover:underline">Tags</a>
                {% endif %}

                {% if authors_enabled %}
                    <div class="bold text-xl">&bull;</div>
                    <a href="{{ url_for('authors') }}" class="hover:underline">Authors</a>
                {% endif %}

                {% if pages %}
                    <div class="bold text-xl">&bull;</div>

                    {% for slug, title in pages %}
                        <a href="{{ url_for('page', { slug: slug }) }}" class="hover:underline">{{ title }}</a>

                        {% if not loop.last %}
                            <div class="bold text-xl">&bull;</div>
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>

            <div class="flex justify-end items-center gap-2">
                <div @click="toggleTheme()" class="flex justify-center items-center rounded cursor-pointer p-1 hover:bg-stone-200 dark:text-stone-200 dark:hover:bg-stone-700" title="Toggle Theme">
                    {{ svg('light/lightbulb', ['fill-current', 'size-6']) }}
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation -->
    <div x-show="open" class="container max-w-4xl border-double border-stone-800 border-b-4 text-stone-800 mx-auto px-4 py-2 transition dark:border-stone-200 dark:text-stone-200 sm:hidden" x-transition>
        <div class="flex flex-col justify-between">
            {% if tags_enabled %}
                <a href="{{ url_for('tags') }}" class="rounded text-center px-1.5 py-1 hover:bg-stone-700">Tags</a>
            {% endif %}

            {% if authors_enabled %}
                <a href="{{ url_for('authors') }}" class="rounded text-center px-1.5 py-1 hover:bg-stone-700">Authors</a>
            {% endif %}

            {% if pages %}
                {% for slug, title in pages %}
                    <a href="{{ url_for('page', { slug: slug }) }}" class="rounded text-center px-1.5 py-1 hover:bg-stone-700">{{ title }}</a>
                {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
